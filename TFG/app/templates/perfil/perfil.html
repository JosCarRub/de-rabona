{% extends 'base.html' %}
{% load static %}

{% block title %}Mi Perfil - De Rabona{% endblock %}

{% block extra_css %}
<link href="{% static 'css/perfil/perfil_styles.css' %}" rel="stylesheet">
<style>


.btn-danger {
    background: #e22914;
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: var(--radius-md);
    text-decoration: none;
    font-weight: var(--font-weight-semibold);
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: var(--profile-transition);
    box-shadow: var(--shadow-subtle);
}

.btn-danger:hover {
    background: #a61103;
    color: white;
    transform: translateY(-2px);
    box-shadow: var(--profile-shadow);
}


.rank-display {
    background: linear-gradient(135deg, var(--home-bg-card) 0%, var(--home-bg-elevated) 100%);
    border: 1px solid var(--home-border);
    border-radius: var(--home-radius);
    padding: 2rem;
    margin-bottom: 2rem;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.rank-display::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 150px;
    height: 150px;
    background: radial-gradient(circle, var(--home-accent-subtle) 0%, transparent 70%);
    border-radius: 50%;
    transform: translate(50%, -50%);
}

.rank-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 2rem;
    border-radius: 25px;
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 1.5rem;
    box-shadow: var(--home-shadow);
    position: relative;
    z-index: 2;
    backdrop-filter: blur(12px);
    transition: var(--home-transition);
}

.rank-badge:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
}

.rank-progress {
    width: 100%;
    max-width: 350px;
    margin: 0 auto;
    position: relative;
    z-index: 2;
}

.progress-bar {
    width: 100%;
    height: 10px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 1rem;
    border: 1px solid var(--home-border);
}

.progress-fill {
    height: 100%;
    border-radius: 10px;
    transition: width 1.2s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
}

.progress-text {
    color: var(--home-text-secondary);
    font-size: 0.9rem;
    font-weight: 500;
}

.elo-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.elo-stat-card {
    background: linear-gradient(135deg, var(--home-bg-card) 0%, var(--home-bg-elevated) 100%);
    border: 1px solid var(--home-border);
    border-radius: var(--home-radius);
    padding: 1.5rem;
    text-align: center;
    transition: var(--home-transition);
    position: relative;
    overflow: hidden;
}

.elo-stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at center, var(--home-accent-subtle) 0%, transparent 60%);
    opacity: 0;
    transition: var(--home-transition);
}

.elo-stat-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--home-shadow);
}

.elo-stat-card:hover::before {
    opacity: 1;
}

.stat-icon-large {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    position: relative;
    z-index: 2;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
}

.stat-value-large {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    color: var(--home-text-primary);
    position: relative;
    z-index: 2;
    letter-spacing: -0.02em;
}

.stat-label-small {
    color: var(--home-text-muted);
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-weight: 600;
    position: relative;
    z-index: 2;
}

.no-stats-message {
    background: linear-gradient(135deg, var(--home-bg-card) 0%, var(--home-bg-elevated) 100%);
    border: 2px dashed var(--home-border);
    border-radius: var(--home-radius);
    padding: 3rem 2rem;
    text-align: center;
    color: var(--home-text-secondary);
}

.no-stats-icon {
    font-size: 3.5rem;
    margin-bottom: 1.5rem;
    opacity: 0.6;
    color: var(--home-text-muted);
}



.achievement-hint {
    background: linear-gradient(135deg, var(--home-accent) 0%, #e14d2a 100%);
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 12px;
    margin-top: 1.5rem;
    font-size: 0.9rem;
    font-weight: 500;
    box-shadow: 0 4px 15px rgba(92, 247, 193, 0.3);
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.achievement-hint i {
    font-size: 1.1rem;
    opacity: 0.9;
    color: var(--mint);
}

/* Rank colors espec√≠ficos manteniendo coherencia */
.rank-bronze { 
    background: linear-gradient(135deg, rgba(205, 127, 50, 0.2), rgba(139, 69, 19, 0.1));
    border: 1px solid rgba(205, 127, 50, 0.4);
    color: #cd7f32;
    box-shadow: 0 8px 25px rgba(205, 127, 50, 0.2);
}

.rank-silver { 
    background: linear-gradient(135deg, rgba(192, 192, 192, 0.2), rgba(128, 128, 128, 0.1));
    border: 1px solid rgba(192, 192, 192, 0.4);
    color: #c0c0c0;
    box-shadow: 0 8px 25px rgba(192, 192, 192, 0.2);
}

.rank-gold { 
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(218, 165, 32, 0.1));
    border: 1px solid rgba(255, 215, 0, 0.4);
    color: #ffd700;
    box-shadow: 0 8px 25px rgba(255, 215, 0, 0.2);
}

.rank-platinum { 
    background: linear-gradient(135deg, rgba(229, 228, 226, 0.2), rgba(169, 169, 169, 0.1));
    border: 1px solid rgba(229, 228, 226, 0.4);
    color: #e5e4e2;
    box-shadow: 0 8px 25px rgba(229, 228, 226, 0.2);
}

.rank-diamond { 
    background: linear-gradient(135deg, rgba(185, 242, 255, 0.2), rgba(0, 191, 255, 0.1));
    border: 1px solid rgba(185, 242, 255, 0.4);
    color: #b9f2ff;
    box-shadow: 0 8px 25px rgba(185, 242, 255, 0.2);
}

.rank-legend { 
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.2), rgba(255, 69, 0, 0.1));
    border: 1px solid rgba(255, 107, 53, 0.4);
    color: #ff6b35;
    box-shadow: 0 8px 25px rgba(255, 107, 53, 0.2);
}

/* Responsive adaptations */
@media (max-width: 768px) {
    .rank-display {
        padding: 1.5rem;
        margin-bottom: 1.5rem;
    }
    
    .rank-badge {
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
        margin-bottom: 1rem;
    }
    
    .progress-bar {
        height: 8px;
        margin-bottom: 0.75rem;
    }
    
    .elo-stats-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
    }
    
    .elo-stat-card {
        padding: 1.25rem;
    }
    
    .stat-icon-large {
        font-size: 2rem;
        margin-bottom: 0.75rem;
    }
    
    .stat-value-large {
        font-size: 1.75rem;
    }
    
    .no-stats-message {
        padding: 2rem 1.5rem;
    }
    
    .no-stats-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
    }
}

@media (max-width: 480px) {
    .rank-display {
        padding: 1.25rem;
    }
    
    .rank-badge {
        padding: 0.6rem 1.25rem;
        font-size: 0.9rem;
        gap: 0.5rem;
    }
    
    .elo-stats-grid {
        grid-template-columns: 1fr 1fr;
        gap: 0.75rem;
    }
    
    .elo-stat-card {
        padding: 1rem;
    }
    
    .stat-icon-large {
        font-size: 1.75rem;
    }
    
    .stat-value-large {
        font-size: 1.5rem;
    }
    
    .achievement-hint {
        padding: 0.75rem 1rem;
        font-size: 0.85rem;
        gap: 0.5rem;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="profile-container">
    <!-- Profile Hero Section -->
    <section class="profile-hero-section">
        <div class="profile-hero-content">
            <!-- Profile Cover -->
            <div class="profile-cover">
                <img src="{{ user.get_banner_url }}"
                     alt="Banner del perfil" class="profile-cover-image">
                <div class="profile-cover-overlay"></div>
            </div>
            
            <!-- Profile Header -->
            <div class="profile-header">
                <div class="profile-avatar-section">
                    <div class="profile-avatar-wrapper">
                        <img src="{{ user.get_avatar_url }}" 
                             alt="Avatar de {{ user.nombre }}" class="profile-avatar">
                        <div class="profile-avatar-ring"></div>
                    </div>
                    
                    <div class="profile-info">
                        <h1 class="profile-name">{{ user.nombre|default:"Nombre no especificado" }}</h1>
                        <div class="profile-meta">
                            {% if user.posicion %}
                                <span class="profile-badge">
                                    <i class="fas fa-futbol"></i>
                                    {{ user.get_posicion_display }}
                                </span>
                            {% endif %}
                            {% if user.ubicacion %}
                                <span class="profile-badge">
                                    <i class="fas fa-map-marker-alt"></i>
                                    {{ user.ubicacion }}
                                </span>
                            {% endif %}
                            <span class="profile-badge profile-elo">
                                <i class="fas fa-star"></i>
                                ELO {{ user.calificacion|floatformat:0 }}
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="profile-actions">
                    <a href="{% url 'update_profile' %}" class="btn-profile-edit">
                        <i class="fas fa-edit"></i>
                        <span>Editar perfil</span>
                    </a>
                    <a href="{% url 'eliminar_cuenta' %}" class="btn-danger ms-2">
                        <i class="fas fa-user-times"></i>
                        <span>Eliminar Cuenta</span>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Profile Navigation -->
    <section class="profile-nav-section">
        <nav class="profile-nav">
            <button class="profile-nav-item active" data-tab="info">
                <i class="fas fa-info-circle"></i>
                <span>Informaci√≥n</span>
            </button>
            <button class="profile-nav-item" data-tab="stats">
                <i class="fas fa-chart-bar"></i>
                <span>Estad√≠sticas</span>
            </button>
            <button class="profile-nav-item" data-tab="elo-ranking">
                <i class="fas fa-trophy"></i>
                <span>Puntuaci√≥n ELO</span>
            </button>
            
        </nav>
    </section>

    <!-- Profile Content -->
    <section class="profile-content-section">
        <!-- Info Tab -->
        <div class="profile-tab-content active" id="info-tab">
            <div class="content-card">
                <div class="card-header">
                    <div class="header-content">
                        <h3 class="card-title">
                            <i class="fas fa-user"></i>
                            Informaci√≥n Personal
                        </h3>
                        <span class="card-subtitle">Datos de tu perfil</span>
                    </div>
                    <a href="{% url 'update_profile' %}" class="header-action">
                        <i class="fas fa-edit"></i>
                        Editar
                    </a>
                </div>
                
                <div class="card-body">
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-user"></i>
                                Nombre completo
                            </div>
                            <div class="info-value">{{ user.nombre|default:"No especificado" }}</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-envelope"></i>
                                Email
                            </div>
                            <div class="info-value">{{ user.username }}</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-calendar"></i>
                                Fecha de nacimiento
                            </div>
                            <div class="info-value">{{ user.fecha_nacimiento|date:"d/m/Y"|default:"No especificada" }}</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-venus-mars"></i>
                                G√©nero
                            </div>
                            <div class="info-value">{{ user.get_genero_display|default:"No especificado" }}</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-futbol"></i>
                                Posici√≥n preferida
                            </div>
                            <div class="info-value">{{ user.get_posicion_display|default:"No especificada" }}</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-map-marker-alt"></i>
                                Ubicaci√≥n
                            </div>
                            <div class="info-value">{{ user.ubicacion|default:"No especificada" }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Tab -->
        <div class="profile-tab-content" id="stats-tab">
            <div class="content-card">
                <div class="card-header">
                    <div class="header-content">
                        <h3 class="card-title">
                            <i class="fas fa-chart-bar"></i>
                            Estad√≠sticas de Juego
                        </h3>
                        <span class="card-subtitle">Tu rendimiento en n√∫meros</span>
                    </div>
                </div>
                
                <div class="card-body">
                    {% if user.partidos_jugados > 0 %}
                        <!-- Stats Overview -->
                        <div class="stats-overview">
                            <div class="stat-card primary">
                                <div class="stat-icon">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-number">{{ user.calificacion|floatformat:0 }}</div>
                                    <div class="stat-label">ELO Actual</div>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-futbol"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-number">{{ user.partidos_jugados }}</div>
                                    <div class="stat-label">Partidos</div>
                                </div>
                            </div>
                            
                            <div class="stat-card success">
                                <div class="stat-icon">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-number">{{ user.victorias }}</div>
                                    <div class="stat-label">Victorias</div>
                                </div>
                            </div>
                            
                            <div class="stat-card neutral">
                                <div class="stat-icon">
                                    <i class="fas fa-handshake"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-number">{{ user.empates }}</div>
                                    <div class="stat-label">Empates</div>
                                </div>
                            </div>
                            
                            <div class="stat-card danger">
                                <div class="stat-icon">
                                    <i class="fas fa-times"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-number">{{ user.derrotas }}</div>
                                    <div class="stat-label">Derrotas</div>
                                </div>
                            </div>
                            
                            <div class="stat-card accent">
                                <div class="stat-icon">
                                    <i class="fas fa-percentage"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-number">{{ win_rate }}%</div>
                                    <div class="stat-label">% Victoria</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Performance Chart -->
                        <div class="performance-chart">
                            <h4 class="chart-title">Distribuci√≥n de Resultados</h4>
                            <div class="chart-bars">
                                <div class="chart-bar">
                                    <div class="bar-header">
                                        <span class="bar-label">Victorias</span>
                                        <span class="bar-percentage">{% widthratio user.victorias user.partidos_jugados 100 %}%</span>
                                    </div>
                                    <div class="bar-track">
                                        <div class="bar-fill success" style="width: {% widthratio user.victorias user.partidos_jugados 100 %}%"></div>
                                    </div>
                                </div>
                                
                                <div class="chart-bar">
                                    <div class="bar-header">
                                        <span class="bar-label">Empates</span>
                                        <span class="bar-percentage">{% widthratio user.empates user.partidos_jugados 100 %}%</span>
                                    </div>
                                    <div class="bar-track">
                                        <div class="bar-fill neutral" style="width: {% widthratio user.empates user.partidos_jugados 100 %}%"></div>
                                    </div>
                                </div>
                                
                                <div class="chart-bar">
                                    <div class="bar-header">
                                        <span class="bar-label">Derrotas</span>
                                        <span class="bar-percentage">{% widthratio user.derrotas user.partidos_jugados 100 %}%</span>
                                    </div>
                                    <div class="bar-track">
                                        <div class="bar-fill danger" style="width: {% widthratio user.derrotas user.partidos_jugados 100 %}%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <!-- No stats message -->
                        <div class="no-stats-message">
                            <div class="no-stats-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <div class="achievement-hint">
                                <i class="fas fa-lightbulb"></i>
                                <span>¬°Tu primer partido te dar√° tu ELO inicial y comenzar√°s a acumular estad√≠sticas!</span>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- ELO Ranking Tab -->
        <div class="profile-tab-content" id="elo-ranking-tab">
            <div class="content-card">
                <div class="card-header">
                    <div class="header-content">
                        <h3 class="card-title">
                            <i class="fas fa-trophy"></i>
                            Sistema de Ranking ELO
                        </h3>
                        <span class="card-subtitle">Tu nivel en el sistema de clasificaci√≥n</span>
                    </div>
                </div>
                
                <div class="card-body">
                    <!-- Current Rank Display -->
                    <div class="rank-display">
                        <div class="rank-badge {% if user.calificacion >= 2000 %}rank-legend{% elif user.calificacion >= 1800 %}rank-diamond{% elif user.calificacion >= 1600 %}rank-platinum{% elif user.calificacion >= 1400 %}rank-gold{% elif user.calificacion >= 1200 %}rank-silver{% else %}rank-bronze{% endif %}">
                            <span style="font-size: 1.3rem;">
                                {% if user.calificacion >= 2000 %}‚≠ê
                                {% elif user.calificacion >= 1800 %}üíé
                                {% elif user.calificacion >= 1600 %}üëë
                                {% elif user.calificacion >= 1400 %}üèÜ
                                {% elif user.calificacion >= 1200 %}‚öîÔ∏è
                                {% else %}üõ°Ô∏è
                                {% endif %}
                            </span>
                            <span>{{ current_rank }}</span>
                        </div>
                        
                        {% if rank_info.next %}
                            <div class="rank-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" 
                                         style="width: {{ rank_info.progress }}%; background: linear-gradient(90deg, {{ rank_info.current.color }}, {{ rank_info.next.color }});">
                                    </div>
                                </div>
                                <div class="progress-text">
                                    <strong>{{ rank_info.elo_needed|floatformat:0 }} ELO</strong> para {{ rank_info.next.name }}
                                    {% if rank_info.next.name == 'Leyenda' %}‚≠ê
                                    {% elif rank_info.next.name == 'Diamante' %}üíé
                                    {% elif rank_info.next.name == 'Platino' %}üëë
                                    {% elif rank_info.next.name == 'Oro' %}üèÜ
                                    {% elif rank_info.next.name == 'Plata' %}‚öîÔ∏è
                                    {% else %}üõ°Ô∏è
                                    {% endif %}
                                </div>
                            </div>
                        {% else %}
                            <div class="progress-text">
                                <strong>¬°Has alcanzado el rango m√°ximo!</strong> üéâ
                            </div>
                        {% endif %}
                    </div>
                    
                    <!-- ELO Information Grid -->
                    <div class="elo-stats-grid">
                        <div class="elo-stat-card">
                            <div class="stat-icon-large" style="color: var(--home-accent);">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="stat-value-large">{{ user.calificacion|floatformat:0 }}</div>
                            <div class="stat-label-small">ELO Actual</div>
                        </div>
                        
                        <div class="elo-stat-card">
                            <div class="stat-icon-large" style="color: #10b981;">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="stat-value-large">{{ current_rank }}</div>
                            <div class="stat-label-small">Rango</div>
                        </div>
                        
                        {% if user.partidos_jugados > 0 %}
                            <div class="elo-stat-card">
                                <div class="stat-icon-large" style="color: #3b82f6;">
                                    <i class="fas fa-futbol"></i>
                                </div>
                                <div class="stat-value-large">{{ user.partidos_jugados }}</div>
                                <div class="stat-label-small">Partidos Jugados</div>
                            </div>
                            
                            <div class="elo-stat-card">
                                <div class="stat-icon-large" style="color: #f59e0b;">
                                    <i class="fas fa-percentage"></i>
                                </div>
                                <div class="stat-value-large">{{ win_rate }}%</div>
                                <div class="stat-label-small">Ratio Victoria</div>
                            </div>
                        {% endif %}
                    </div>
                    
                    <!-- Rank System Explanation -->
                    <div class="content-card" style="margin-top: 2rem;">
                        <div class="card-header">
                            <div class="header-content">
                                <h4 class="card-title">
                                    <i class="fas fa-info-circle"></i>
                                    Sistema de Rangos
                                </h4>
                                <span class="card-subtitle">C√≥mo funciona la clasificaci√≥n ELO</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1.5rem; text-align: center;">
                                <div>
                                    <div style="font-size: 1.8rem; margin-bottom: 0.75rem;">üõ°Ô∏è</div>
                                    <div style="font-weight: bold; color: #cd7f32; font-size: 1rem;">Bronce</div>
                                    <div style="font-size: 0.85rem; color: var(--home-text-muted);">0 - 1199</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.8rem; margin-bottom: 0.75rem;">‚öîÔ∏è</div>
                                    <div style="font-weight: bold; color: #c0c0c0; font-size: 1rem;">Plata</div>
                                    <div style="font-size: 0.85rem; color: var(--home-text-muted);">1200 - 1399</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.8rem; margin-bottom: 0.75rem;">üèÜ</div>
                                    <div style="font-weight: bold; color: #ffd700; font-size: 1rem;">Oro</div>
                                    <div style="font-size: 0.85rem; color: var(--home-text-muted);">1400 - 1599</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.8rem; margin-bottom: 0.75rem;">üëë</div>
                                    <div style="font-weight: bold; color: #e5e4e2; font-size: 1rem;">Platino</div>
                                    <div style="font-size: 0.85rem; color: var(--home-text-muted);">1600 - 1799</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.8rem; margin-bottom: 0.75rem;">üíé</div>
                                    <div style="font-weight: bold; color: #b9f2ff; font-size: 1rem;">Diamante</div>
                                    <div style="font-size: 0.85rem; color: var(--home-text-muted);">1800 - 1999</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.8rem; margin-bottom: 0.75rem;">‚≠ê</div>
                                    <div style="font-weight: bold; color: #ff6b35; font-size: 1rem;">Leyenda</div>
                                    <div style="font-size: 0.85rem; color: var(--home-text-muted);">2000+</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Teams Tab -->
        <div class="profile-tab-content" id="teams-tab">
            <div class="content-card">
                <div class="card-header">
                    <div class="header-content">
                        <h3 class="card-title">
                            <i class="fas fa-users"></i>
                            Mis Equipos
                        </h3>
                        <span class="card-subtitle">Equipos donde participas</span>
                    </div>
                </div>
                
                <div class="card-body">
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h4 class="empty-title">Pr√≥ximamente</h4>
                        <p class="empty-desc">Listado de equipos a los que perteneces y tu rol en cada uno.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Tab functionality
    const tabButtons = document.querySelectorAll('.profile-nav-item');
    const tabContents = document.querySelectorAll('.profile-tab-content');
    
    tabButtons.forEach(button => {
        button.addEventListener('click', function() {
            const targetTab = this.getAttribute('data-tab');
            
            // Remove active class from all buttons and contents
            tabButtons.forEach(btn => btn.classList.remove('active'));
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Add active class to clicked button and corresponding content
            this.classList.add('active');
            document.getElementById(targetTab + '-tab').classList.add('active');
            
            // Animate tab content
            const targetContent = document.getElementById(targetTab + '-tab');
            targetContent.style.opacity = '0';
            targetContent.style.transform = 'translateY(20px)';
            
            setTimeout(() => {
                targetContent.style.transition = 'all 0.4s ease';
                targetContent.style.opacity = '1';
                targetContent.style.transform = 'translateY(0)';
            }, 50);
        });
    });
    
    // Smooth scroll on profile navigation
    const profileNav = document.querySelector('.profile-nav-section');
    if (profileNav) {
        const profileNavOffset = profileNav.offsetTop;
        
        window.addEventListener('scroll', function() {
            if (window.pageYOffset >= profileNavOffset) {
                profileNav.classList.add('sticky');
            } else {
                profileNav.classList.remove('sticky');
            }
        });
    }
    
    // Animate stats on scroll
    const statsObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('animate-in');
                statsObserver.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1 });
    
    document.querySelectorAll('.stat-card, .elo-stat-card').forEach(card => {
        statsObserver.observe(card);
    });
    
    // Animate progress bar on load
    const progressFill = document.querySelector('.progress-fill');
    if (progressFill) {
        // Delay inicial para permitir que la p√°gina cargue
        setTimeout(() => {
            progressFill.style.transition = 'width 1.5s cubic-bezier(0.4, 0, 0.2, 1)';
            
            // Trigger reflow para asegurar que la animaci√≥n funcione
            const currentWidth = progressFill.style.width;
            progressFill.style.width = '0%';
            
            // Usar requestAnimationFrame para asegurar el repaint
            requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                    progressFill.style.width = currentWidth;
                });
            });
        }, 500);
    }
    
    // Animate rank badge on load
    const rankBadge = document.querySelector('.rank-badge');
    if (rankBadge) {
        setTimeout(() => {
            rankBadge.style.opacity = '0';
            rankBadge.style.transform = 'scale(0.8) translateY(20px)';
            rankBadge.style.transition = 'all 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
            
            requestAnimationFrame(() => {
                rankBadge.style.opacity = '1';
                rankBadge.style.transform = 'scale(1) translateY(0)';
            });
        }, 300);
    }
    
    // Enhanced hover effects for elo stat cards
    document.querySelectorAll('.elo-stat-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-8px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });
    
    // Add loading animation for rank display
    const rankDisplay = document.querySelector('.rank-display');
    if (rankDisplay) {
        rankDisplay.style.opacity = '0';
        rankDisplay.style.transform = 'translateY(30px)';
        
        setTimeout(() => {
            rankDisplay.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
            rankDisplay.style.opacity = '1';
            rankDisplay.style.transform = 'translateY(0)';
        }, 200);
    }
});
</script>
{% endblock %}